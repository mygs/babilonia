{% extends 'layout.html' %}

{% block body %}
<div class="container">
  <div class="alert alert-info col-md-4 col-md-offset-4 text-center" id="nodealert">
    <div>
        <span><strong>O NODE 12345 (indoor)</strong></span>
        <button class="btn btn-xs btn-danger" data-toggle="modal" data-target="#updateNodeModal"  data-id="12345" data-mode="indoor" data-crud="new">Adicionar</button>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <h2 id="index">Plantação</h2>
      <ul class="clearfix" id="sortable">
        {% for module in modules %}
          <li>
            <div id='status_{{module[1]}}' class="box {{ status_node(module[3]) }} {{ mode(module[2]) }}">
              <h4>{{module[0]}}</h4>
               <p><span id='time_{{module[1]}}'>{{ format_timestamp(module[3]) }} </span></p>
              <table id="telemetry">
                <tr>
                  <td class="param-label">Temperature</td>
                  <td class="param-value {{ mode(module[2]) }}" id='temp_{{module[1]}}'>{{ format_temperature(module[4]) }}</td>
                </tr>
                <tr>
                  <td class="param-label">Moisture A</i></td>
                  <td class="param-value {{ mode(module[2]) }}" id='mma_{{module[1]}}'>{{ format_moisture(module[8], module[2]) }}</td>
                </tr>
                <tr>
                  <td class="param-label">Moisture B</i></td>
                  <td class="param-value {{ mode(module[2]) }}" id='mmb_{{module[1]}}'>{{ format_moisture(module[9], module[2]) }}</td>
                </tr>
                <tr>
                  <td class="param-label">Moisture C</i></td>
                  <td class="param-value {{ mode(module[2]) }}" id='mmc_{{module[1]}}'>{{ format_moisture(module[10], module[2]) }}</td>
                </tr>
                <tr>
                  <td class="param-label">Humidity</td>
                  <td class="param-value {{ mode(module[2]) }}" id='humid_{{module[1]}}'>{{ format_humidity(module[5]) }}</td>
                </tr>
                <tr>
                  <td class="param-label">Fan</td>
                  <td class="param-value {{ mode(module[2]) }}" id='fan_{{module[1]}}'>{{ status(module[6], module[2]) }}</td>
                </tr>
                <tr>
                  <td class="param-label">Light</td>
                  <td class="param-value {{ mode(module[2]) }}" id='light_{{module[1]}}'>{{ status(module[7], module[2]) }}</td>
                </tr>
              </table>
              <table id="cockpit">
              <tr>
                <td><button type="button" class="btn btn-sm btn-block btn-default" data-toggle="modal" data-target="#updateNodeModal"  data-id="{{module[1]}}" data-mode="{{mode(module[2])}}" data-crud="edit"><i class="fa fa-cog" aria-hidden="true"></i></button></td>
                <td><button type="button" class="btn btn-sm btn-block btn-warning btn-refresh" data-id="{{module[1]}}" data-name="{{module[0]}}" data-cmd="1"><i class="fa fa-refresh" aria-hidden="true"></i></button></td>
                <td><button type="button" {{ disableBtn("light", module[2]) }} class="btn btn-sm btn-block btn-info btn-light" data-id="{{module[1]}}" data-name="{{module[0]}}"><i class="wi wi-day-sunny"></i></button></td>
                <td><button type="button" {{ disableBtn("fan", module[2]) }} class="btn btn-sm btn-block btn-default btn-fan" data-id="{{module[1]}}" data-name="{{module[0]}}"><i class="wi wi-cloudy-gusts"></i></button></td>
              </tr>
              <tr>
                <td><button type="button" class="btn btn-sm btn-block btn-danger btn-restart" data-id="{{module[1]}}" data-name="{{module[0]}}"><i class="fa fa-power-off"></i></button></td>
                <td><button type="button" class="btn btn-sm btn-block btn-success btn-plot" data-toggle="modal" data-target="#chartNodeModal"  data-id="{{module[1]}}" data-name="{{module[0]}}"><i class="fa fa-line-chart" aria-hidden="true"></i></button></td>
                <td><button type="button" {{ disableBtn("sop", module[2]) }} class="btn btn-sm btn-block btn-warning btn-sop" data-id="{{module[1]}}" data-name="{{module[0]}}"><i class="wi wi-sprinkle"></i></button></td>
              </tr>
              </table>

            </div>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endblock %}
<!-- modals -->
{% include 'modal-updatenode.html' %}
{% include 'modal-chart.html' %}
